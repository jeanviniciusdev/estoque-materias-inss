{% extends 'stock/base.html' %}
{% block content %}
<div class="card shadow-sm p-4 mb-3" style="background-color: #001D40; border-radius: 10px;">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-light mb-0">ðŸ“¦ Materiais</h2>
    <div>
      <a class="btn btn-success me-2" href="{% url 'materials_add' %}">Adicionar material</a>
      <a class="btn btn-outline-light me-2" href="{% url 'export_materials_csv' %}">Exportar materiais (CSV)</a>
      <a class="btn btn-outline-light" href="{% url 'export_movements_csv' %}">Exportar movimentos (CSV)</a>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table mb-0 text-light" style="background-color: transparent; border-radius: 8px; overflow: hidden;">
      <thead>
        <tr style="background-color: #00285E;">
          <th>Nome</th>
          <th>Quantidade</th>
          <th>MÃ­nimo</th>
          <th>AÃ§Ãµes</th>
        </tr>
      </thead>
      <tbody>
        {% for m in materiais %}
        <tr class="table-row">
          <td class="fw-semibold">{{ m.nome }}</td>
          <td>{{ m.quantidade }}</td>
          <td>{{ m.minimo }}</td>
          <td>
            <a class="btn btn-sm btn-primary me-2" href="{% url 'materials_edit' m.pk %}">Editar</a>
            {% if user.is_staff %}
            <form action="{% url 'materials_delete' m.pk %}" method="post" style="display:inline;">
              {% csrf_token %}
              <button class="btn btn-sm btn-danger" type="submit">Excluir</button>
            </form>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" class="text-center py-3 text-light">Nenhum material cadastrado.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<style>
  /* === Estilo da tabela === */
  table {
    border-collapse: separate;
    border-spacing: 0;
  }

  thead th {
    color: #FFFFFF;
    font-weight: 600;
    border-bottom: 2px solid rgba(255, 255, 255, 0.1);
  }

  /* Linhas alternadas */
  tbody tr:nth-child(odd) {
    background-color: #00285E; /* Azul escuro */
  }

  tbody tr:nth-child(even) {
    background-color: #001B3A; /* Azul um pouco mais escuro */
  }

  /* Hover suave */
  tbody tr:hover {
    background-color: #013A7A;
    transition: background-color 0.3s ease;
  }

  /* Remover bordas padrÃ£o */
  td, th {
    border: none !important;
    vertical-align: middle;
  }

  /* BotÃµes coerentes com o tema */
  .btn-outline-light {
    border: 1px solid rgba(255, 255, 255, 0.4);
    color: #fff;
  }
  .btn-outline-light:hover {
    background-color: #1C64AE;
    border-color: #1C64AE;
  }

  .btn-primary {
    background-color: #1C64AE;
    border: none;
  }
  .btn-primary:hover {
    background-color: #155b99;
  }

  .btn-danger {
    background-color: #C0392B;
    border: none;
  }
  .btn-danger:hover {
    background-color: #A93226;
  }

  .btn-success {
    background-color: #27AE60;
    border: none;
  }
  .btn-success:hover {
    background-color: #229954;
  }
</style>
{% endblock %}
