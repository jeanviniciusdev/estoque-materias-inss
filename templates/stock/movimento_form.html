{% extends 'stock/base.html' %}
{% block content %}
<style>
  .form-container {
    min-height: calc(100vh - 100px);
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1.25rem;
  }

  .form-card {
    background-color: var(--card-color);
    color: var(--text-color);
    border-radius: 12px;
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.3);
    padding: 1.2rem 1.5rem;
    background-color: #001D40;
    color: #fff;
    border-radius: 10px;
    padding: 1.4rem;
    width: 100%;
    max-width: 400px;
    text-align: center;
    animation: fadeIn 0.6s ease-in-out;
    transition: background-color 0.3s, color 0.3s;
  }

  .form-card h4 { margin-bottom: 0.9rem; font-weight:700; }
  .form-group { margin-bottom: 1.0rem; } /* maior espaÃ§amento entre campos */
  .form-card label { display:block; margin-bottom:0.35rem; color:#fff; font-weight:700; }
  .form-card input, .form-card select, .form-card textarea {
    width:100%; padding:0.55rem; border-radius:6px; border:1px solid #2f4c7b; background:#fff; color:#000;
  }
  .form-card textarea { min-height:80px; resize:vertical; }

  #group-data-devolucao label { font-weight:700; } /* label destacado */
  .btn-register {
    width:100%;
    background-color:#28a745;
    color:#fff;
    border:none;
    padding:0.6rem;
    border-radius:8px;
    font-weight:700;
    margin-top:0.4rem;
  }
</style>

<div class="form-container">
  <div class="form-card base-equal">
    <h4>ðŸ”ƒ Registrar Movimento</h4>

    <form method="post">
      {% csrf_token %}

      <div class="form-group">
        <label for="id_material">Material</label>
        {{ form.material }}
      </div>

      <div class="form-group">
        <label for="id_tipo">Tipo</label>
        {{ form.tipo }}
      </div>

      <div class="form-group">
        <label for="id_quantidade">Quantidade</label>
        {{ form.quantidade }}
      </div>

      <div class="form-group">
        <label for="id_nota">Nota</label>
        {{ form.nota }}
      </div>

      <div class="form-group" id="group-data-devolucao" style="display:none;">
        <label for="id_data_devolucao">Data de devoluÃ§Ã£o:</label>
        {{ form.data_devolucao }}
      </div>

      <button type="submit" class="btn-register">Registrar</button>
    </form>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const tipo = document.getElementById('id_tipo');
  const group = document.getElementById('group-data-devolucao');

  function toggleDevolucao() {
    if (!tipo) return;
    if (tipo.value === 'EMPRESTIMO') {
      group.style.display = 'block';
    } else {
      group.style.display = 'none';
      const fld = document.getElementById('id_data_devolucao');
      if (fld) fld.value = '';
    }
  }

  toggleDevolucao();
  if (tipo) tipo.addEventListener('change', toggleDevolucao);
});
</script>
{% endblock %}
